<!DOCTYPE html>
<html lang="fr" class="h-full" x-data="hospitalApp()" x-init="init()">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SIGHo — Système Intégré de Gestion Hospitalière de Côte d’Ivoire</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Alpine.js -->
  <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: {
              50: '#f0fdfa',
              100: '#ccfbf1',
              200: '#99f6e4',
              300: '#5eead4',
              400: '#2dd4bf',
              500: '#14b8a6',
              600: '#0d9488',
              700: '#0f766e',
              800: '#115e59',
              900: '#134e4a',
            },
            hospital: {
              blue: '#1e40af',
              teal: '#0d9488',
              emerald: '#10b981',
              amber: '#f59e0b',
              rose: '#f43f5e'
            }
          },
          animation: {
            'pulse-soft': 'pulse-soft 2s cubic-bezier(0.4, 0, 0.6, 1) infinite',
            'fade-in': 'fade-in .35s ease-out both',
            'slide-in': 'slide-in .3s ease-out both'
          },
          keyframes: {
            'pulse-soft': {'0%,100%': {opacity: 1}, '50%': {opacity: .85}},
            'fade-in': {'0%': {opacity: 0}, '100%': {opacity: 1}},
            'slide-in': {'0%': {transform: 'translateX(100%)'}, '100%': {transform: 'translateX(0)'}}
          },
          boxShadow: {soft: '0 8px 30px rgba(2,6,23,.08)'}
        }
      }
    }
  </script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

    * { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", sans-serif; }

    .sidebar-transition { transition: width .3s ease; }
    .card-hover { transition: transform .2s ease, box-shadow .2s ease; }
    .card-hover:hover { transform: translateY(-2px); box-shadow: 0 10px 25px -5px rgba(0,0,0,.08), 0 10px 10px -5px rgba(0,0,0,.04); }

    /* Transitions */
    .fade-enter-active, .fade-leave-active { transition: opacity .25s ease; }
    .fade-enter-from, .fade-leave-to { opacity: 0; }
    .slide-enter-active, .slide-leave-active { transition: transform .3s ease; }
    .slide-enter-from, .slide-leave-to { transform: translateX(100%); }

    /* Reduce motion */
    @media (prefers-reduced-motion: reduce) {
      * { animation-duration: .01ms !important; animation-iteration-count: 1 !important; transition-duration: .01ms !important; }
    }

    /* Scrollbar */
    .custom-scrollbar::-webkit-scrollbar { width: 6px; height: 6px; }
    .custom-scrollbar::-webkit-scrollbar-track { background: #f1f5f9; }
    .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
    .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
    .dark .custom-scrollbar::-webkit-scrollbar-track { background: #334155; }
    .dark .custom-scrollbar::-webkit-scrollbar-thumb { background: #475569; }
    .dark .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #64748b; }
  </style>
</head>

<body class="h-full bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-100 transition-colors duration-300">
<div id="app" class="h-full flex" @keyup.escape="closeOverlays()" tabindex="0">

  <!-- ===== Sidebar ===== -->
{% include "layout/aside.html" %}

  <!-- ===== Main ===== -->
{% block content %}
    {% endblock %}



</div>

<script>
  function hospitalApp() {
    return {
      // ==== UI State ====
      darkMode: false,
      sidebarCollapsed: false,
      showNotifications: false,
      showProfileMenu: false,
      showModal: false,
      showDrawer: false,
      showTooltip: null,
      activeTab: 'patients',
      currentPage: 'Tableau de bord',
      drawerPatient: {},
      openGroups: new Set(['specialites-ci']),
      
      // Methods
      toggleDarkMode() {
        this.darkMode = !this.darkMode;
        document.documentElement.classList.toggle('dark', this.darkMode);
      },
      toggleSidebar() {
        this.sidebarCollapsed = !this.sidebarCollapsed;
      },
      toggleNotifications() {
        this.showNotifications = !this.showNotifications;
        this.showProfileMenu = false;
      },
      toggleProfileMenu() {
        this.showProfileMenu = !this.showProfileMenu;
        this.showNotifications = false;
      },
      isOpen(id) {
        return this.openGroups.has(id);
      },
      toggleSub(id) {
        if (this.openGroups.has(id)) {
          this.openGroups.delete(id);
        } else {
          this.openGroups.add(id);
        }
      },
      removeToast(id) {
        // Implementation would remove toast from array
      },
      notify(type, title, message) {
        console.log(`Notification: ${type} - ${title} - ${message}`);
      },
      closeOverlays() {
        this.showModal = false;
        this.showDrawer = false;
        this.showNotifications = false;
        this.showProfileMenu = false;
      },
      confirmAction() {
        this.notify('success','Action confirmée','Votre action a été prise en compte.');
        this.showModal = false;
      },
      openDrawerWith(p) {
        this.drawerPatient = p;
        this.showDrawer = true;
      },
      init() {
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
          this.darkMode = true;
        }
        document.documentElement.classList.toggle('dark', this.darkMode);
        
        // Ouvrir la section Spécialités au chargement
        this.openGroups.add('specialites-ci');
        
        // Toast de bienvenue
        setTimeout(() => this.notify('info', 'Bienvenue', 'Vous êtes connecté(e) à CHU - MSHPCMU National'), 900);
      }
    }
  }
</script>
</body>
</html>